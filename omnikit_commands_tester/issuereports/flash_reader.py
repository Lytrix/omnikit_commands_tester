
#             02 LL 50 IIII eeeeee0a pppliiib cccccccc dfgggggg
# 1f08910c 24cd 02 cb 50 0a94 40404300 45406d00 48404200 4d406e00 5041420055406f00584044805d4072806041458001407a8004404780094083800c4147801141818014414580194180801c414480214076002440420029416e002c40420031406a0034404300394068003c41450041406b0044404600494169004c4045005140680054414400594069805c40458061406e800040468005406880084047800d416f80104044801540648018403f801d4163802041420025206600282047002d2171003020460035207500382149003d207a008329

from bitstring import BitArray
from textwrap import wrap


def dword2bits(dword, log_number):
    """
    print dword as bits
    args:
        32 bit dword as string, for example: '51213e00'
    output:
        bits
    """
    c = BitArray(hex=dword)
    bits = c.bin
    #print(f'Log #: DWORD {dword}')
    # print('pulse eeeeee0a pppliiib cccccccc dfgggggg')
    print(' {}'.format(str(log_number).zfill(4)), ' '.join(wrap(bits, 8)))


def split_dwords(hex_string):
    """
    Remove type and pulse count, and crc at end of string
    Return 8 character elements in list
    """
    dwords_string = hex_string[22:-4]
    dwords = wrap(dwords_string, 8)
    return dwords


def flashlogs2bits(flash_logs):
    """
    Merge type 51 and type 50 logs
    Print list of logs as pulse number and bits
    """

    dwords = []
    for flash_type, logs in flash_logs.items():
        dwords.extend(split_dwords(logs))
    # print('pulse eeeeee0a pppliiib cccccccc dfgggggg')
    for i, dword in enumerate(dwords):
        log_number = last_log_number-100+i+1
        dword2bits(dword, log_number)


def main():
    flash_logs = {
        'type_51': '1f08910c2ccd02cb51003240513f0045505d0048413c004d40570050413e0055405c00584041805d416380604141800140678004404380094066800c4144801140618014414180194162801c413f8021415f0024414300294064002c214300314065003441420039405e003c41440041415f004441430049405f004c4042005141620054414300594166805c404480614183800040548005409480084153800d50918010414f8015418e80184152801d4078802040520025408600284151002d4185003041500035407b00384045003d416b000354',
        'type_50': '1f08910c24cd02cb500a944040430045406d00484042004d406e005041420055406f00584044805d4072806041458001407a8004404780094083800c4147801141818014414580194180801c414480214076002440420029416e002c40420031406a0034404300394068003c41450041406b0044404600494169004c4045005140680054414400594069805c40458061406e800040468005406880084047800d416f80104044801540648018403f801d4163802041420025206600282047002d2171003020460035207500382149003d207a008329',
        }
    flashlogs2bits(flash_logs)
    # print(dwords_string)


if __name__ == '__main__':
    main()
